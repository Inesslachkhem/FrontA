<div class="container mx-auto px-4 py-8">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">Dashboard</h1>
    <p class="text-gray-600">
      Welcome to SmartPromo - Your retail management overview
    </p>
  </div>

  <!-- Summary Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <!-- Articles Card -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="p-3 bg-blue-100 rounded-full">
          <i class="fas fa-box text-blue-600 text-xl"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-600">Total Articles</p>
          <p class="text-2xl font-bold text-gray-900">{{ articlesCount }}</p>
          <p class="text-xs text-gray-500 mt-1">
            <span class="text-green-600">{{ activeArticlesCount }} active</span>
          </p>
        </div>
      </div>
      <div class="mt-4">
        <button
          routerLink="/articles"
          class="text-blue-600 hover:text-blue-800 text-sm font-medium"
        >
          View all articles →
        </button>
      </div>
    </div>

    <!-- Promotions Card -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="p-3 bg-green-100 rounded-full">
          <i class="fas fa-tags text-green-600 text-xl"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-600">Active Promotions</p>
          <p class="text-2xl font-bold text-gray-900">
            {{ activePromotionsCount }}
          </p>
          <p class="text-xs text-gray-500 mt-1">
            <span class="text-orange-600"
              >{{ pendingPromotionsCount }} pending approval</span
            >
          </p>
        </div>
      </div>
      <div class="mt-4">
        <button
          routerLink="/promotion"
          class="text-green-600 hover:text-green-800 text-sm font-medium"
        >
          Manage promotions →
        </button>
      </div>
    </div>

    <!-- Stock Card -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="p-3 bg-red-100 rounded-full">
          <i class="fas fa-warehouse text-red-600 text-xl"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-600">Low Stock Items</p>
          <p class="text-2xl font-bold text-red-600">{{ lowStockCount }}</p>
          <p class="text-xs text-gray-500 mt-1">
            <span class="text-red-600">{{ outOfStockCount }} out of stock</span>
          </p>
        </div>
      </div>
      <div class="mt-4">
        <button
          routerLink="/stock"
          class="text-red-600 hover:text-red-800 text-sm font-medium"
        >
          Check inventory →
        </button>
      </div>
    </div>

    <!-- Sales Card -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center">
        <div class="p-3 bg-purple-100 rounded-full">
          <i class="fas fa-chart-line text-purple-600 text-xl"></i>
        </div>
        <div class="ml-4">
          <p class="text-sm font-medium text-gray-600">Today's Sales</p>
          <p class="text-2xl font-bold text-gray-900">{{ todaysSalesCount }}</p>
          <p class="text-xs text-gray-500 mt-1">
            <span class="text-green-600">{{
              todaysRevenue | currency : "TND"
            }}</span>
          </p>
        </div>
      </div>
      <div class="mt-4">
        <button
          routerLink="/ventes"
          class="text-purple-600 hover:text-purple-800 text-sm font-medium"
        >
          View sales →
        </button>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="bg-white rounded-lg shadow-md p-6 mb-8">
    <h2 class="text-xl font-bold text-gray-800 mb-4">Quick Actions</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <button
        routerLink="/articles"
        class="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"
      >
        <div class="text-center">
          <i class="fas fa-plus-circle text-blue-500 text-2xl mb-2"></i>
          <p class="text-sm font-medium text-gray-700">Add Article</p>
        </div>
      </button>

      <button
        routerLink="/promotion"
        class="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors"
      >
        <div class="text-center">
          <i class="fas fa-percentage text-green-500 text-2xl mb-2"></i>
          <p class="text-sm font-medium text-gray-700">Create Promotion</p>
        </div>
      </button>

      <button
        routerLink="/stock"
        class="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-red-500 hover:bg-red-50 transition-colors"
      >
        <div class="text-center">
          <i class="fas fa-boxes text-red-500 text-2xl mb-2"></i>
          <p class="text-sm font-medium text-gray-700">Update Stock</p>
        </div>
      </button>

      <button
        routerLink="/ventes"
        class="flex items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors"
      >
        <div class="text-center">
          <i class="fas fa-shopping-cart text-purple-500 text-2xl mb-2"></i>
          <p class="text-sm font-medium text-gray-700">Record Sale</p>
        </div>
      </button>
    </div>
  </div>

  <!-- Recent Activity and Alerts -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Low Stock Alerts -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-gray-800">Stock Alerts</h2>
        <button
          routerLink="/stock"
          class="text-red-600 hover:text-red-800 text-sm font-medium"
        >
          View all →
        </button>
      </div>

      <div
        *ngIf="lowStockItems.length === 0"
        class="text-center py-8 text-gray-500"
      >
        <i class="fas fa-check-circle text-green-500 text-3xl mb-2"></i>
        <p>All items are well stocked!</p>
      </div>

      <div *ngIf="lowStockItems.length > 0" class="space-y-3">
        <div
          *ngFor="let item of lowStockItems.slice(0, 5)"
          class="flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200"
        >
          <div>
            <p class="font-medium text-gray-900">{{ item.article?.libelle }}</p>
            <p class="text-sm text-gray-600">{{ item.article?.codeArticle }}</p>
          </div>
          <div class="text-right">
            <p class="text-sm font-medium text-red-600">
              {{ item.quantitePhysique }} left
            </p>
            <p class="text-xs text-gray-500">Min: {{ item.stockMin }}</p>
          </div>
        </div>
        <div *ngIf="lowStockItems.length > 5" class="text-center">
          <p class="text-sm text-gray-600">
            +{{ lowStockItems.length - 5 }} more items need attention
          </p>
        </div>
      </div>
    </div>

    <!-- Recent Promotions -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-gray-800">Recent Promotions</h2>
        <button
          routerLink="/promotion"
          class="text-green-600 hover:text-green-800 text-sm font-medium"
        >
          View all →
        </button>
      </div>

      <div
        *ngIf="recentPromotions.length === 0"
        class="text-center py-8 text-gray-500"
      >
        <i class="fas fa-tags text-gray-400 text-3xl mb-2"></i>
        <p>No recent promotions</p>
      </div>

      <div *ngIf="recentPromotions.length > 0" class="space-y-3">
        <div
          *ngFor="let promotion of recentPromotions.slice(0, 5)"
          class="flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50"
        >
          <div>
            <p class="font-medium text-gray-900">
              {{ promotion.tauxReduction }}% OFF
            </p>
            <p class="text-sm text-gray-600">
              {{ promotion.article?.libelle }}
            </p>
            <p class="text-xs text-gray-500">
              Ends: {{ promotion.dateFin | date : "shortDate" }}
            </p>
          </div>
          <div class="text-right">
            <span
              [class]="
                promotion.isAccepted
                  ? 'bg-green-100 text-green-800'
                  : 'bg-yellow-100 text-yellow-800'
              "
              class="px-2 py-1 rounded-full text-xs font-medium"
            >
              {{ promotion.isAccepted ? "Active" : "Pending" }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading States -->
  <div *ngIf="loading" class="flex justify-center items-center py-12">
    <div
      class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"
    ></div>
  </div>
</div>
